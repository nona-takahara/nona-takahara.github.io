---
title: リポジトリの運用備忘録（良いマージ方法）
short: "最近の高原の制作物はまともででかいものが増えてきたので、GitやGitHubの扱い方をきちんと見直すべきではないか。ということで備忘録を書きます。"
---

最近の高原の制作物はまともででかいものが増えてきたので、GitやGitHubの扱い方をきちんと見直すべきではないか。ということで備忘録を書きます。

## リポジトリの運用

原則として Git フローを採用していますが、git-flow プラグインを使わずに GitHub 上で手作業で行っています（今後改めるかもしれません）。

常に Git フローが適しているわけではないので、プロジェクトによって最適なフローを選択するようにします（例えば、ホームページ「こーげんやさい」は GitHub フロー（ただし記事投稿のような、ビルド失敗の可能性が小さい作業は master で直接作業）としています）。

新しいリポジトリでは main を基本のブランチ名にすることを標準としています。ただし、既にある master ブランチを改名することはしません。また使用する支援ツールが master を前提としている場合は master を使用します（例えば、git-flowプラグインを使用する場合は master にします）。

さて、初めて大規模開発に挑んだ、[N-TRACS 宗弥急行 Wayside Signals](https://github.com/nona-takahara/n-tracs-soya-express) ではかなり悪いツリーが生成されてしまいました……　この反省として、今後は以下のような運用にします:

- main(masetr)へのマージ: Create a merge commit一択。コマンドでは`git merge --no-ff`である
- developへのマージ: SquashかCreate...を使う。原則Create...だが、プロジェクトによってはSquashにする。これはプロジェクト内では一貫させる。

忘れたら見返します。また、変更があれば記事自体を更新予定です。よろしくお願いします（？）。
