---
//@ts-ignore
import path from "path";
import BaseLayout from "@layouts/BaseLayout.astro";
import { MdxComponents } from "@data/components/layout/MdxComponents";
import { getCollection, render } from "astro:content";

export async function getStaticPaths() {
  const data = await getCollection("applist");

  return data.map((work) => {
    return {
      params: { work: work.id },
      props: work,
    };
  });
}

const content = Astro.props;
const { Content } = await render(content);
---

<BaseLayout
  titleShort={content.data.title}
  titleSuffix=" | こーげんやさい"
  description={content.data.short}
  pageType="article"
>
  <nav>
    <div class="container">
      <p>
        <a href="/">こーげんやさい</a> >
        <a href="/works/">つくったもの</a> > {content.data.title}
      </p>
    </div>
  </nav>
  <main id="content" class="container blog">
    props={JSON.stringify(content)}
    <Content components={MdxComponents} />
  </main>
</BaseLayout>
