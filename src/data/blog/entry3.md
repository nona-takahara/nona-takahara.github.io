---
title: Disqusによるコメント機能を追加しました
short: 相変わらず活用法が思いつきませんが、とりあえずコメント機能を追加してしまいました
---

相変わらず活用法が思いつきませんが、とりあえずコメント機能を追加してしまいました。

### Disqusでコメント欄をゲットする
[静的なサイトにDisqusでコメント欄を設置する - diwao日記](https://diwao.com/2017/06/install-disqus.html)を参考にして設置しました。知り合いも同じもの使ってるのでたぶん問題ないでしょう。

参考記事では設置にあたって推奨設定項目の設定を解説していなかったので、簡単に説明しておきます。

Disqusのサイトには確かにコードスニペットが置かれており、それを貼るだけで設置できます。しかしコメントを外して、いくつか設定を書き加えておくべきです。当サイトでは次のようにしました（備忘録を兼ねた記述です）。

```
this.page.url = 'https://nona-takahara.github.io/blog/<%= data.fileName %>';
this.page.identifier = '<%= data.hash %>';
```

この、data.hashでは初回投稿時点でのタイトルについてMD5ハッシュを取った結果の16進数表記（`createHash('md5').update(data.orignalTitle || data.title).digest('hex')`）を入れています。

つまりタイトルを変更する際には初回タイトルをorignalTitleに移して残しておかないといけないということになるのですが、それしか一意な値を振る方法が思いつかなかったのじゃ……

もしもっと良い方法があれば、今後なんとかしておこうと思います……

### 再び今後の話
Stormworks系の動画をまた投稿する予定でいますが、その際に動画内容に準じた解説記事を投稿したいなと考えています。それまでにはこのブログにタグ分類機能を追加する必要がありそうです。

今のところ各記事にはタグを付けていないので、どうやっても「最終更新日時」が更新されます。このときに合わせてMD5ハッシュを取る源を「初回投稿タイトル」みたいな感じの新設フィールドにすればいいのかなと思います。

それではまた。